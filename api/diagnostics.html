
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Diagnostics &#8212; PyMC3 3.5 documentation</title>
    <link rel="stylesheet" href="../_static/semantic-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="../_static/highlight.min.js"></script>
    <script type="text/javascript" src="../_static/semantic.min.js"></script>
    <link rel="shortcut icon" href="../_static/PyMC3.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<script>hljs.initHighlightingOnLoad();</script>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">



  </head><body>
<div class="ui vertical center aligned">

    <div class="ui container">
        <div class="ui large secondary pointing menu">
            <a class="item" href="/">
                <img class="ui bottom aligned tiny image" src="https://cdn.rawgit.com/pymc-devs/pymc3/master/docs/logos/svg/PyMC3_banner.svg" />
            </a>
             <a href="../nb_tutorials/index.html" class="item">Tutorials</a> <a href="../nb_examples/index.html" class="item">Examples</a> <a href="../learn.html" class="item">Books + Videos</a> <a href="../api.html" class="item">API</a> <a href="../developer_guide.html" class="item">Developer Guide</a> <a href="../history.html" class="item">About PyMC3</a>
            
            <div class="right menu">
                <div class="item">
                    <form class="ui icon input" action="../search.html" method="get">
                        <input type="text" placeholder="Search..." name="q" />
                        <i class="search link icon"></i>
                    </form>
                </div>
                <a class="item" href="https://github.com/pymc-devs/pymc3"><i class="github blue icon large"></i></a>
            </div>
        </div>
    </div>
    
</div>

<div class="ui container" role="main">
    

    <div class="ui vertical segment">
        
  <div class="section" id="module-pymc3.diagnostics">
<span id="diagnostics"></span><h1>Diagnostics<a class="headerlink" href="#module-pymc3.diagnostics" title="Permalink to this headline">¶</a></h1>
<p>Convergence diagnostics and model validation</p>
<dl class="function">
<dt id="pymc3.diagnostics.geweke">
<code class="descclassname">pymc3.diagnostics.</code><code class="descname">geweke</code><span class="sig-paren">(</span><em>pymc3_obj</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.diagnostics.geweke" title="Permalink to this definition">¶</a></dt>
<dd><p>Return z-scores for convergence diagnostics.</p>
<p>Compare the mean of the first % of series with the mean of the last % of
series. x is divided into a number of segments for which this difference is
computed. If the series is converged, this score should oscillate between
-1 and 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">array-like</span></dt><dd><p>The trace of some stochastic parameter.</p>
</dd>
<dt><strong>first</strong><span class="classifier">float</span></dt><dd><p>The fraction of series at the beginning of the trace.</p>
</dd>
<dt><strong>last</strong><span class="classifier">float</span></dt><dd><p>The fraction of series at the end to be compared with the section
at the beginning.</p>
</dd>
<dt><strong>intervals</strong><span class="classifier">int</span></dt><dd><p>The number of segments.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>scores</strong><span class="classifier">list [[]]</span></dt><dd><p>Return a list of [i, score], where i is the starting index for each
interval and score the Geweke score on the interval.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The Geweke score on some series x is computed by:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\frac{E[x_s] - E[x_e]}{\sqrt{V[x_s] + V[x_e]}}\]</div>
</div></blockquote>
<p>where <span class="math notranslate nohighlight">\(E\)</span> stands for the mean, <span class="math notranslate nohighlight">\(V\)</span> the variance,
<span class="math notranslate nohighlight">\(x_s\)</span> a section at the start of the series and
<span class="math notranslate nohighlight">\(x_e\)</span> a section at the end of the series.</p>
<p class="rubric">References</p>
<p>Geweke (1992)</p>
</dd></dl>

<dl class="function">
<dt id="pymc3.diagnostics.gelman_rubin">
<code class="descclassname">pymc3.diagnostics.</code><code class="descname">gelman_rubin</code><span class="sig-paren">(</span><em>mtrace</em>, <em>varnames=None</em>, <em>include_transformed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.diagnostics.gelman_rubin" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns estimate of R for a set of traces.</p>
<p>The Gelman-Rubin diagnostic tests for lack of convergence by comparing
the variance between multiple chains to the variance within each chain.
If convergence has been achieved, the between-chain and within-chain
variances should be identical. To be most effective in detecting evidence
for nonconvergence, each chain should have been initialized to starting
values that are dispersed relative to the target distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>mtrace</strong><span class="classifier">MultiTrace or trace object</span></dt><dd><p>A MultiTrace object containing parallel traces (minimum 2)
of one or more stochastic parameters.</p>
</dd>
<dt><strong>varnames</strong><span class="classifier">list</span></dt><dd><p>Names of variables to include in the rhat report</p>
</dd>
<dt><strong>include_transformed</strong><span class="classifier">bool</span></dt><dd><p>Flag for reporting automatically transformed variables in addition
to original variables (defaults to False).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>Rhat</strong><span class="classifier">dict of floats (MultiTrace) or float (trace object)</span></dt><dd><p>Returns dictionary of the potential scale reduction
factors, <span class="math notranslate nohighlight">\(\hat{R}\)</span></p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The diagnostic is computed by:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\hat{R} = \frac{\hat{V}}{W}\]</div>
</div></blockquote>
<p>where <span class="math notranslate nohighlight">\(W\)</span> is the within-chain variance and <span class="math notranslate nohighlight">\(\hat{V}\)</span> is
the posterior variance estimate for the pooled traces. This is the
potential scale reduction factor, which converges to unity when each
of the traces is a sample from the target posterior. Values greater
than one indicate that one or more chains have not yet converged.</p>
<p class="rubric">References</p>
<p>Brooks and Gelman (1998)
Gelman and Rubin (1992)</p>
</dd></dl>

<dl class="function">
<dt id="pymc3.diagnostics.effective_n">
<code class="descclassname">pymc3.diagnostics.</code><code class="descname">effective_n</code><span class="sig-paren">(</span><em>mtrace</em>, <em>varnames=None</em>, <em>include_transformed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.diagnostics.effective_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns estimate of the effective sample size of a set of traces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>mtrace</strong><span class="classifier">MultiTrace or trace object</span></dt><dd><p>A MultiTrace object containing parallel traces (minimum 2)
of one or more stochastic parameters.</p>
</dd>
<dt><strong>varnames</strong><span class="classifier">list</span></dt><dd><p>Names of variables to include in the effective_n report</p>
</dd>
<dt><strong>include_transformed</strong><span class="classifier">bool</span></dt><dd><p>Flag for reporting automatically transformed variables in addition
to original variables (defaults to False).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>n_eff</strong><span class="classifier">dictionary of floats (MultiTrace) or float (trace object)</span></dt><dd><p>Return the effective sample size, <span class="math notranslate nohighlight">\(\hat{n}_{eff}\)</span></p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The diagnostic is computed by:</p>
<div class="math notranslate nohighlight">
\[\hat{n}_{eff} = \frac{mn}{1 + 2 \sum_{t=1}^T \hat{\rho}_t}\]</div>
<p>where <span class="math notranslate nohighlight">\(\hat{\rho}_t\)</span> is the estimated autocorrelation at lag t, and T
is the first odd positive integer for which the sum
<span class="math notranslate nohighlight">\(\hat{\rho}_{T+1} + \hat{\rho}_{T+1}\)</span> is negative.</p>
<p>The current implementation is similar to Stan, which uses Geyer’s initial
monotone sequence criterion (Geyer, 1992; Geyer, 2011).</p>
<p class="rubric">References</p>
<p>Gelman et al. BDA (2014)</p>
</dd></dl>

</div>


    </div>
</div>
<div class="ui vertical footer segment">
    <div class="ui center aligned container">
        <a href="https://github.com/pymc-devs/pymc3"><i class="github icon large"></i></a>
        <a href="https://twitter.com/pymc_devs"><i class="twitter icon large"></i></a>
        <a href="https://discourse.pymc.io/"><i class="discourse icon large"></i></a>
    </div>
    <div class="ui center aligned container">
        <p>
            &copy; Copyright 2018, The PyMC Development Team.
        </p>
        <p>
            Created using <a href="https://sphinx-doc.org/">Sphinx</a> 2.0.1.<br />
        </p>
    </div>
</div>
  </body>
</html>