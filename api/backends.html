
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Backends &#8212; PyMC3 3.5 documentation</title>
    <link rel="stylesheet" href="../_static/semantic-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script type="text/javascript" src="../_static/highlight.min.js"></script>
    <script type="text/javascript" src="../_static/semantic.min.js"></script>
    <link rel="shortcut icon" href="../_static/PyMC3.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<script>hljs.initHighlightingOnLoad();</script>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">



  </head><body>
<div class="ui vertical center aligned">

    <div class="ui container">
        <div class="ui large secondary pointing menu">
            <a class="item" href="/">
                <img class="ui bottom aligned tiny image" src="https://cdn.rawgit.com/pymc-devs/pymc3/master/docs/logos/svg/PyMC3_banner.svg" />
            </a>
             <a href="../nb_tutorials/index.html" class="item">Tutorials</a> <a href="../nb_examples/index.html" class="item">Examples</a> <a href="../learn.html" class="item">Books + Videos</a> <a href="../api.html" class="item">API</a> <a href="../developer_guide.html" class="item">Developer Guide</a> <a href="../history.html" class="item">About PyMC3</a>
            
            <div class="right menu">
                <div class="item">
                    <form class="ui icon input" action="../search.html" method="get">
                        <input type="text" placeholder="Search..." name="q" />
                        <i class="search link icon"></i>
                    </form>
                </div>
                <a class="item" href="https://github.com/pymc-devs/pymc3"><i class="github blue icon large"></i></a>
            </div>
        </div>
    </div>
    
</div>

<div class="ui container" role="main">
    

    <div class="ui vertical segment">
        
  <div class="section" id="module-pymc3.backends">
<span id="backends"></span><h1>Backends<a class="headerlink" href="#module-pymc3.backends" title="Permalink to this headline">¶</a></h1>
<p>Backends for traces</p>
<div class="section" id="available-backends">
<h2>Available backends<a class="headerlink" href="#available-backends" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>NumPy array (pymc3.backends.NDArray)</p></li>
<li><p>Text files (pymc3.backends.Text)</p></li>
<li><p>SQLite (pymc3.backends.SQLite)</p></li>
</ol>
<p>The NDArray backend holds the entire trace in memory, whereas the Text
and SQLite backends store the values while sampling.</p>
</div>
<div class="section" id="selecting-a-backend">
<h2>Selecting a backend<a class="headerlink" href="#selecting-a-backend" title="Permalink to this headline">¶</a></h2>
<p>By default, a NumPy array is used as the backend. To specify a different
backend, pass a backend instance to <cite>sample</cite>.</p>
<p>For example, the following would save the sampling values to CSV files
in the directory ‘test’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pymc3</span> <span class="k">as</span> <span class="nn">pm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pm</span><span class="o">.</span><span class="n">Model</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">db</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">trace</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">trace</span><span class="o">=</span><span class="n">db</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that as in the example above, one must have an active model context,
or pass a <cite>model</cite> parameter in order to create a backend.</p>
</div>
<div class="section" id="selecting-values-from-a-backend">
<h2>Selecting values from a backend<a class="headerlink" href="#selecting-values-from-a-backend" title="Permalink to this headline">¶</a></h2>
<p>After a backend is finished sampling, it returns a MultiTrace object.
Values can be accessed in a few ways. The easiest way is to index the
backend object with a variable or variable name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>  <span class="c1"># or trace.x or trace[x]</span>
</pre></div>
</div>
<p>The call will return the sampling values of <cite>x</cite>, with the values for
all chains concatenated. (For a single call to <cite>sample</cite>, the number of
chains will correspond to the <cite>cores</cite> argument.)</p>
<p>To discard the first N values of each chain, slicing syntax can be
used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">:]</span>
</pre></div>
</div>
<p>The <cite>get_values</cite> method offers more control over which values are
returned. The call below will discard the first 1000 iterations
from each chain and keep the values for each chain as separate arrays.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">get_values</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">burn</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">combine</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>chains</cite> parameter of <cite>get_values</cite> can be used to limit the chains
that are retrieved.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span><span class="o">.</span><span class="n">get_values</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">burn</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">chains</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>MultiTrace objects also support slicing. For example, the following
call would return a new trace object without the first 1000 sampling
iterations for all traces and variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_trace</span> <span class="o">=</span> <span class="n">trace</span><span class="p">[</span><span class="mi">1000</span><span class="p">:]</span>
</pre></div>
</div>
<p>The backend for the new trace is always NDArray, regardless of the
type of original trace.  Only the NDArray backend supports a stop
value in the slice.</p>
</div>
<div class="section" id="loading-a-saved-backend">
<h2>Loading a saved backend<a class="headerlink" href="#loading-a-saved-backend" title="Permalink to this headline">¶</a></h2>
<p>Saved backends can be loaded using <cite>load</cite> function in the module for the
specific backend.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-custom-backends">
<h2>Writing custom backends<a class="headerlink" href="#writing-custom-backends" title="Permalink to this headline">¶</a></h2>
<p>Backends consist of a class that handles sampling storage and value
selection. Three sampling methods of backend will be called:</p>
<ul class="simple">
<li><p>setup: Before sampling is started, the <cite>setup</cite> method will be called
with two arguments: the number of draws and the chain number. This is
useful setting up any structure for storing the sampling values that
require the above information.</p></li>
<li><p>record: Record the sampling results for the current draw. This method
will be called with a dictionary of values mapped to the variable
names. This is the only sampling function that <em>must</em> do something to
have a meaningful backend.</p></li>
<li><p>close: This method is called following sampling and should perform any
actions necessary for finalizing and cleaning up the backend.</p></li>
</ul>
<p>The base storage class <cite>backends.base.BaseTrace</cite> provides common model
setup that is used by all the PyMC backends.</p>
<p>Several selection methods must also be defined:</p>
<ul class="simple">
<li><p>get_values: This is the core method for selecting values from the
backend. It can be called directly and is used by __getitem__ when the
backend is indexed with a variable name or object.</p></li>
<li><p>_slice: Defines how the backend returns a slice of itself. This
is called if the backend is indexed with a slice range.</p></li>
<li><p>point: Returns values for each variable at a single iteration. This is
called if the backend is indexed with a single integer.</p></li>
<li><p>__len__: This should return the number of draws.</p></li>
</ul>
<p>When <cite>pymc3.sample</cite> finishes, it wraps all trace objects in a MultiTrace
object that provides a consistent selection interface for all backends.
If the traces are stored on disk, then a <cite>load</cite> function should also be
defined that returns a MultiTrace object.</p>
<p>For specific examples, see pymc3.backends.{ndarray,text,sqlite}.py.</p>
</div>
<div class="section" id="module-pymc3.backends.ndarray">
<span id="ndarray"></span><h2>ndarray<a class="headerlink" href="#module-pymc3.backends.ndarray" title="Permalink to this headline">¶</a></h2>
<p>NumPy array trace backend</p>
<p>Store sampling values in memory as a NumPy array.</p>
<dl class="class">
<dt id="pymc3.backends.ndarray.NDArray">
<em class="property">class </em><code class="descclassname">pymc3.backends.ndarray.</code><code class="descname">NDArray</code><span class="sig-paren">(</span><em>name=None</em>, <em>model=None</em>, <em>vars=None</em>, <em>test_point=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.NDArray" title="Permalink to this definition">¶</a></dt>
<dd><p>NDArray trace object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of backend. This has no meaning for the NDArray backend.</p>
</dd>
<dt><strong>model</strong><span class="classifier">Model</span></dt><dd><p>If None, the model is taken from the <cite>with</cite> context.</p>
</dd>
<dt><strong>vars</strong><span class="classifier">list of variables</span></dt><dd><p>Sampling values will be stored for these variables. If None,
<cite>model.unobserved_RVs</cite> is used.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="pymc3.backends.ndarray.NDArray.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.NDArray.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the database backend.</p>
<p>This is called after sampling has finished.</p>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.ndarray.NDArray.get_values">
<code class="descname">get_values</code><span class="sig-paren">(</span><em>self</em>, <em>varname</em>, <em>burn=0</em>, <em>thin=1</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.NDArray.get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Get values from trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>varname</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>burn</strong><span class="classifier">int</span></dt><dd></dd>
<dt><strong>thin</strong><span class="classifier">int</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>A NumPy array</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.ndarray.NDArray.point">
<code class="descname">point</code><span class="sig-paren">(</span><em>self</em>, <em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.NDArray.point" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dictionary of point values at <cite>idx</cite> for current chain
with variable names as keys.</p>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.ndarray.NDArray.record">
<code class="descname">record</code><span class="sig-paren">(</span><em>self</em>, <em>point</em>, <em>sampler_stats=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.NDArray.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Record results of a sampling iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>point</strong><span class="classifier">dict</span></dt><dd><p>Values mapped to variable names</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.ndarray.NDArray.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>self</em>, <em>draws</em>, <em>chain</em>, <em>sampler_vars=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.NDArray.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform chain-specific setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>draws</strong><span class="classifier">int</span></dt><dd><p>Expected number of draws</p>
</dd>
<dt><strong>chain</strong><span class="classifier">int</span></dt><dd><p>Chain number</p>
</dd>
<dt><strong>sampler_vars</strong><span class="classifier">list of dicts</span></dt><dd><p>Names and dtypes of the variables that are
exported by the samplers.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pymc3.backends.ndarray.load_trace">
<code class="descclassname">pymc3.backends.ndarray.</code><code class="descname">load_trace</code><span class="sig-paren">(</span><em>directory</em>, <em>model=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.load_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a multitrace that has been written to file.</p>
<p>A the model used for the trace must be passed in, or the command
must be run in a model context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>directory</strong><span class="classifier">str</span></dt><dd><p>Path to a pymc3 serialized trace</p>
</dd>
<dt><strong>model</strong><span class="classifier">pm.Model (optional)</span></dt><dd><p>Model used to create the trace.  Can also be inferred from context</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>pm.Multitrace that was saved in the directory</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pymc3.backends.ndarray.save_trace">
<code class="descclassname">pymc3.backends.ndarray.</code><code class="descname">save_trace</code><span class="sig-paren">(</span><em>trace</em>, <em>directory=None</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.ndarray.save_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Save multitrace to file.</p>
<p>TODO: Also save warnings.</p>
<p>This is a custom data format for PyMC3 traces.  Each chain goes inside
a directory, and each directory contains a metadata json file, and a
numpy compressed file.  See <a class="reference external" href="https://docs.scipy.org/doc/numpy/neps/npy-format.html">https://docs.scipy.org/doc/numpy/neps/npy-format.html</a>
for more information about this format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>trace</strong><span class="classifier">pm.MultiTrace</span></dt><dd><p>trace to save to disk</p>
</dd>
<dt><strong>directory</strong><span class="classifier">str (optional)</span></dt><dd><p>path to a directory to save the trace</p>
</dd>
<dt><strong>overwrite</strong><span class="classifier">bool (default False)</span></dt><dd><p>whether to overwrite an existing directory.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>str, path to the directory where the trace was saved</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pymc3.backends.sqlite">
<span id="sqlite"></span><h2>sqlite<a class="headerlink" href="#module-pymc3.backends.sqlite" title="Permalink to this headline">¶</a></h2>
<p>SQLite trace backend</p>
<p>Store and retrieve sampling values in SQLite database file.</p>
<div class="section" id="database-format">
<h3>Database format<a class="headerlink" href="#database-format" title="Permalink to this headline">¶</a></h3>
<p>For each variable, a table is created with the following format:</p>
<blockquote>
<div><p>recid (INT), draw (INT), chain (INT),  v0 (FLOAT), v1 (FLOAT), v2 (FLOAT) …</p>
</div></blockquote>
<p>The variable column names are extended to reflect additional dimensions.
For example, a variable with the shape (2, 2) would be stored as</p>
<blockquote>
<div><p>key (INT), draw (INT), chain (INT),  v0_0 (FLOAT), v0_1 (FLOAT), v1_0 (FLOAT) …</p>
</div></blockquote>
<p>The key is autoincremented each time a new row is added to the table.
The chain column denotes the chain index and starts at 0.</p>
<dl class="class">
<dt id="pymc3.backends.sqlite.SQLite">
<em class="property">class </em><code class="descclassname">pymc3.backends.sqlite.</code><code class="descname">SQLite</code><span class="sig-paren">(</span><em>name</em>, <em>model=None</em>, <em>vars=None</em>, <em>test_point=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.SQLite" title="Permalink to this definition">¶</a></dt>
<dd><p>SQLite trace object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of database file</p>
</dd>
<dt><strong>model</strong><span class="classifier">Model</span></dt><dd><p>If None, the model is taken from the <cite>with</cite> context.</p>
</dd>
<dt><strong>vars</strong><span class="classifier">list of variables</span></dt><dd><p>Sampling values will be stored for these variables. If None,
<cite>model.unobserved_RVs</cite> is used.</p>
</dd>
<dt><strong>test_point</strong><span class="classifier">dict</span></dt><dd><p>use different test point that might be with changed variables shapes</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="pymc3.backends.sqlite.SQLite.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.SQLite.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the database backend.</p>
<p>This is called after sampling has finished.</p>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.sqlite.SQLite.get_values">
<code class="descname">get_values</code><span class="sig-paren">(</span><em>self</em>, <em>varname</em>, <em>burn=0</em>, <em>thin=1</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.SQLite.get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Get values from trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>varname</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>burn</strong><span class="classifier">int</span></dt><dd></dd>
<dt><strong>thin</strong><span class="classifier">int</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>A NumPy array</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.sqlite.SQLite.point">
<code class="descname">point</code><span class="sig-paren">(</span><em>self</em>, <em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.SQLite.point" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dictionary of point values at <cite>idx</cite> for current chain
with variables names as keys.</p>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.sqlite.SQLite.record">
<code class="descname">record</code><span class="sig-paren">(</span><em>self</em>, <em>point</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.SQLite.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Record results of a sampling iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>point</strong><span class="classifier">dict</span></dt><dd><p>Values mapped to variable names</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.sqlite.SQLite.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>self</em>, <em>draws</em>, <em>chain</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.SQLite.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform chain-specific setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>draws</strong><span class="classifier">int</span></dt><dd><p>Expected number of draws</p>
</dd>
<dt><strong>chain</strong><span class="classifier">int</span></dt><dd><p>Chain number</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pymc3.backends.sqlite.load">
<code class="descclassname">pymc3.backends.sqlite.</code><code class="descname">load</code><span class="sig-paren">(</span><em>name</em>, <em>model=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.sqlite.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load SQLite database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Path to SQLite database file</p>
</dd>
<dt><strong>model</strong><span class="classifier">Model</span></dt><dd><p>If None, the model is taken from the <cite>with</cite> context.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>A MultiTrace instance</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-pymc3.backends.text">
<span id="text"></span><h2>text<a class="headerlink" href="#module-pymc3.backends.text" title="Permalink to this headline">¶</a></h2>
<p>Text file trace backend</p>
<p>Store sampling values as CSV files.</p>
<div class="section" id="file-format">
<h3>File format<a class="headerlink" href="#file-format" title="Permalink to this headline">¶</a></h3>
<p>Sampling values for each chain are saved in a separate file (under a
directory specified by the <cite>name</cite> argument).  The rows correspond to
sampling iterations.  The column names consist of variable names and
index labels.  For example, the heading</p>
<blockquote>
<div><p>x,y__0_0,y__0_1,y__1_0,y__1_1,y__2_0,y__2_1</p>
</div></blockquote>
<p>represents two variables, x and y, where x is a scalar and y has a
shape of (3, 2).</p>
<dl class="class">
<dt id="pymc3.backends.text.Text">
<em class="property">class </em><code class="descclassname">pymc3.backends.text.</code><code class="descname">Text</code><span class="sig-paren">(</span><em>name</em>, <em>model=None</em>, <em>vars=None</em>, <em>test_point=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.Text" title="Permalink to this definition">¶</a></dt>
<dd><p>Text trace object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of directory to store text files</p>
</dd>
<dt><strong>model</strong><span class="classifier">Model</span></dt><dd><p>If None, the model is taken from the <cite>with</cite> context.</p>
</dd>
<dt><strong>vars</strong><span class="classifier">list of variables</span></dt><dd><p>Sampling values will be stored for these variables. If None,
<cite>model.unobserved_RVs</cite> is used.</p>
</dd>
<dt><strong>test_point</strong><span class="classifier">dict</span></dt><dd><p>use different test point that might be with changed variables shapes</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="pymc3.backends.text.Text.close">
<code class="descname">close</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.Text.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the database backend.</p>
<p>This is called after sampling has finished.</p>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.text.Text.get_values">
<code class="descname">get_values</code><span class="sig-paren">(</span><em>self</em>, <em>varname</em>, <em>burn=0</em>, <em>thin=1</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.Text.get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Get values from trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>varname</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>burn</strong><span class="classifier">int</span></dt><dd></dd>
<dt><strong>thin</strong><span class="classifier">int</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>A NumPy array</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.text.Text.point">
<code class="descname">point</code><span class="sig-paren">(</span><em>self</em>, <em>idx</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.Text.point" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dictionary of point values at <cite>idx</cite> for current chain
with variables names as keys.</p>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.text.Text.record">
<code class="descname">record</code><span class="sig-paren">(</span><em>self</em>, <em>point</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.Text.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Record results of a sampling iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>point</strong><span class="classifier">dict</span></dt><dd><p>Values mapped to variable names</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pymc3.backends.text.Text.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>self</em>, <em>draws</em>, <em>chain</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.Text.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform chain-specific setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>draws</strong><span class="classifier">int</span></dt><dd><p>Expected number of draws</p>
</dd>
<dt><strong>chain</strong><span class="classifier">int</span></dt><dd><p>Chain number</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pymc3.backends.text.dump">
<code class="descclassname">pymc3.backends.text.</code><code class="descname">dump</code><span class="sig-paren">(</span><em>name</em>, <em>trace</em>, <em>chains=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Store values from NDArray trace as CSV files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of directory to store CSV files in</p>
</dd>
<dt><strong>trace</strong><span class="classifier">MultiTrace of NDArray traces</span></dt><dd><p>Result of MCMC run with default NDArray backend</p>
</dd>
<dt><strong>chains</strong><span class="classifier">list</span></dt><dd><p>Chains to dump. If None, all chains are dumped.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pymc3.backends.text.load">
<code class="descclassname">pymc3.backends.text.</code><code class="descname">load</code><span class="sig-paren">(</span><em>name</em>, <em>model=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.text.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load Text database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd><p>Name of directory with files (one per chain)</p>
</dd>
<dt><strong>model</strong><span class="classifier">Model</span></dt><dd><p>If None, the model is taken from the <cite>with</cite> context.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>A MultiTrace instance</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-pymc3.backends.tracetab">
<span id="tracetab"></span><h2>tracetab<a class="headerlink" href="#module-pymc3.backends.tracetab" title="Permalink to this headline">¶</a></h2>
<p>Functions for converting traces into a table-like format</p>
<dl class="function">
<dt id="pymc3.backends.tracetab.trace_to_dataframe">
<code class="descclassname">pymc3.backends.tracetab.</code><code class="descname">trace_to_dataframe</code><span class="sig-paren">(</span><em>trace</em>, <em>chains=None</em>, <em>varnames=None</em>, <em>include_transformed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pymc3.backends.tracetab.trace_to_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert trace to Pandas DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>trace</strong><span class="classifier">NDarray trace</span></dt><dd></dd>
<dt><strong>chains</strong><span class="classifier">int or list of ints</span></dt><dd><p>Chains to include. If None, all chains are used. A single
chain value can also be given.</p>
</dd>
<dt><strong>varnames</strong><span class="classifier">list of variable names</span></dt><dd><p>Variables to be included in the DataFrame, if None all variable are
included.</p>
</dd>
<dt><strong>include_transformed: boolean</strong></dt><dd><p>If true transformed variables will be included in the resulting
DataFrame.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>


    </div>
</div>
<div class="ui vertical footer segment">
    <div class="ui center aligned container">
        <a href="https://github.com/pymc-devs/pymc3"><i class="github icon large"></i></a>
        <a href="https://twitter.com/pymc_devs"><i class="twitter icon large"></i></a>
        <a href="https://discourse.pymc.io/"><i class="discourse icon large"></i></a>
    </div>
    <div class="ui center aligned container">
        <p>
            &copy; Copyright 2018, The PyMC Development Team.
        </p>
        <p>
            Created using <a href="https://sphinx-doc.org/">Sphinx</a> 2.0.1.<br />
        </p>
    </div>
</div>
  </body>
</html>